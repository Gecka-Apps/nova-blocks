@import "../../../assets/scss/setup";

:root {
    --nova-media-white: #FFFFFF;
    --nova-media-gray: #EEF1F2;
    --nova-media-gray-darkest: #272743;

    --nova-media-blue: #203AB6;
    --nova-media-blue-dark: #323067;
    --nova-media-blue-darker: #000043;

    --nova-media-spacing-unit: 56px;

    @include below( desktop ) {
        --nova-media-mobile-spacing-unit: 28px;
    }
}

.wp-block-pixelgrade-media {
    --nova-media-text-color: var(--nova-media-gray-darkest);
    --nova-media-titles-color: var(--nova-media-blue-dark);
    --nova-media-subtitles-color: var(--nova-media-blue);
    --nova-media-background-color: transparent;

    --nova-media-padding: 0;
    --nova-media-content-padding: 0;
    --nova-media-content-background-color: transparent;
    --nova-media-content-box-shadow: none;
}

// #wpwrap temporary hack to make sure everything works just fine
.nova-media {
    position: relative;

    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    grid-column-gap: var(--nova-media-spacing-unit);

    padding-top: var(--nova-media-padding);
    padding-bottom: var(--nova-media-padding);

    h1, h3, h3 {
        color: var(--nova-media-titles-color);
    }

    h4, h5, h6 {
        color: var(--nova-media-subtitles-color);
    }

    p {
        color: var(--nova-media-text-color);
    }

    &:before {
        content: '';

        position: absolute;
        top: 0;
        left: -50vw;
        right: -50vw;
        z-index: -1;

        display: block;
        height: 100%;

        background-color: var(--nova-media-background-color);
    }
}

.block-is-moderate,
.block-is-highlighted {
    --nova-media-padding: var(--nova-media-spacing-unit);
}

.block-is-moderate {
    --nova-media-background-color: var(--nova-media-gray);
}

.block-is-highlighted {
    --nova-media-background-color: var(--nova-media-blue-darker);
}

.content-is-moderate,
.content-is-highlighted {
    --nova-media-content-padding: var(--nova-media-spacing-unit);
}

.content-is-moderate,
.content-is-highlighted.block-is-highlighted {
    --nova-media-content-background-color: var(--nova-media-white);
    --nova-media-content-box-shadow: #{$nova-box-shadow-nova};
}

.content-is-moderate.block-is-highlighted {
    --nova-media-content-background-color: #{rgba(#FFFFFF, .2)};
}

.block-is-highlighted:not(.content-is-highlighted),
.content-is-highlighted:not(.block-is-highlighted) {
    --nova-media-text-color: var(--nova-media-white);
    --nova-media-titles-color: var(--nova-media-text-color);
    --nova-media-subtitles-color: var(--nova-media-text-color);
}

.content-is-highlighted:not(.block-is-highlighted) {
    --nova-media-content-background-color: var(--nova-media-blue-darker);
}

.nova-media__content {
    padding: var(--nova-media-content-padding);
    background-color: var(--nova-media-content-background-color);
    box-shadow: var(--nova-media-content-box-shadow);
    z-index: 2;

    .content-is-moderate & {
        margin-bottom: var(--nova-media-mobile-spacing-unit);
    }

    .content-is-highlighted & {
        margin-top: var(--nova-media-mobile-spacing-unit);
    }
}

.nova-media__aside {
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    grid-template-rows: repeat(12, 1fr);
    grid-gap: 15px;

    min-height: 400px;

    .is-simple-grid &,
    .is-overlap-grid & {
        img {
            @include image-cover;
        }
    }

    .has-image-on-the-right & {
        @include above( desktop ) {
            order: 2;
        }
    }
}

.nova-media__image {
    position: relative;
    grid-column: span 6;
    grid-row: span 6;

    &:nth-child(n+5) {
        display: none;
    }
}

@include below( desktop ) {

    .nova-media__content {
        grid-column: span 2;
    }

    .nova-media__aside {
        grid-column: span 2;
        order: 2;
    }
}

.nova-media__image:first-child:last-child,
.nova-media__placeholder {
    grid-column: span 12;
    grid-row: span 12;
}

.nova-media__image:first-child:nth-last-child(2) ~ *,
.nova-media__image:first-child:nth-last-child(2) {
    grid-column: span 6;
    grid-row: span 12;
}

.nova-media__image:nth-last-child(3):first-child {
    grid-column: 1 / span 6;
    grid-row: 1/ span 6;
}

.nova-media__image:nth-last-child(3):first-child ~ .nova-media__image:nth-child(2) {
    grid-column: 7 / span 6;
    grid-row: 1/ span 6;
}

.nova-media__image:nth-last-child(3):first-child ~ .nova-media__image:last-child {
    grid-column: 1 / span 12;
    grid-row: 7 / span 6;
}

.wp-block-pixelgrade-media[class][class] {
    margin: 0;
}

[class*="block-is"] {
    + [class*="block-is"] {
        .nova-media {
            padding-top: 0;
        }
    }
}

.wp-block-pixelgrade-media:not([class*="block-is"]) {
    + .wp-block-pixelgrade-media:not([class*="block-is"]) {
        .nova-media {
            margin-top: var(--nova-media-spacing-unit);
        }
    }

    + [class*="block-is"] {
        margin-top: var(--nova-media-spacing-unit);
    }
}

[class*="block-is-moderate"] {
    + [class*="block-is-highlighted"] {
        .nova-media {
            padding-top: var(--nova-media-spacing-unit);
        }
    }
}
