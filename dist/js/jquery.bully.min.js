!function(t,e,l,i){var o,n,s=t(e),u=[],a=[],c=t('<div class="c-bully">'),r=t('<div class="c-bully__bullet c-bully__bullet--active">').appendTo(c),h=0,f=!1,d=!1;function p(){t.each(u,function(t,e){e._reloadElement()})}function b(){e.innerWidth,o=e.innerHeight,n=(e.pageYOffset||l.documentElement.scrollTop)-(l.documentElement.clientTop||0),d=!1}function m(){if(!0!==d){var l=0,i=!1,a={},p=!1;if(t.each(u,function(t,e){n>=e.offset.top-o/2&&(l+=1,i=n<e.offset.top+e.height-o/2)}),f!==i&&(f=i,c.toggleClass("c-bully--inversed",f),a.inversed=f,p=!0),l!==h){var b=c.children(".c-bully__bullet").not(".c-bully__bullet--active").first().outerHeight(!0)*(l-1);r.removeClass("c-bully__bullet--squash"),setTimeout(function(){r.addClass("c-bully__bullet--squash")}),r.css("top",b),h=l,a.current=l,p=!0}p&&s.trigger("bully",a)}e.requestAnimationFrame(m),d=!0}function _(e,l){this.element=e,this.options=t.extend({},t.fn.bully.defaults,l),this.initialized=!1,this._reloadElement(),u.push(this),h=0}s.on("resize scroll load",b),s.on("resize load",p),s.on("load",function(){var e,l,i;e=u,l="c-bully__bullet--pop",i=400,t.each(e,function(t,e){var o=t*i;setTimeout(function(){e.$bullet.addClass(l)},o)})}),t(function(){c.appendTo("body"),p(),requestAnimationFrame(m)}),_.prototype={constructor:_,_reloadElement:function(){this.offset=t(this.element).offset(),this.height=t(this.element).outerHeight(),this.initialized||(this.$bullet=t('<div class="c-bully__bullet">'),this.$bullet.data("bully-data",this),this.$bullet.appendTo(c),this.$bullet.on("click",this.onClick.bind(this)),this.initialized=!0,a.unshift(this.$bullet))},onClick:function(e){e.preventDefault(),e.stopPropagation();var l=t("html, body");if(0!=this.options.scrollDuration)if("auto"!==this.options.scrollDuration)l.animate({scrollTop:this.offset.top},this.options.scrollDuration);else{var i=Math.abs(n-this.offset.top)/(this.options.scrollPerSecond/1e3);l.animate({scrollTop:this.offset.top},i)}else l.scrollTop(this.offset.top)}},t.fn.bully=function(e){return this.each(function(){t.data(this,"plugin_"+_)||t.data(this,"plugin_"+_,new _(this,e))})},t.fn.bully.defaults={scrollDuration:"auto",scrollPerSecond:4e3}}(jQuery,window,document);